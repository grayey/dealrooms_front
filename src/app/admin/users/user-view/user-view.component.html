<!--<div id="preloader" *ngIf="loaders.processing">-->
<!--<div id="status">-->
<!--<div class="spinner"></div>-->
<!--</div>-->
<!--</div>-->

<div id="view_attache_modal" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="view_attache_modal"
     aria-hidden="true">
  <div class="modal-dialog modal-lg">


    <div class="modal-content">
      <div class="modal-header">
        <div class="pull-left">
          <img class=" modal-logo" src="assets/front/img/app_logo.png">

        </div>
        <h5 class="modal-title mt-2 ml-5 text-dark" id=""> Other Travellers</h5>
        <button type="button" class="close " data-dismiss="modal" aria-hidden="true"><i class="fa fa-times"></i>
        </button>
      </div>
      <div class="modal-body">
        <div class="card-header text-center">
          <h6><b>{{viewedTravel?.destination}} Trip</b> &nbsp; <b>
            <small> ({{viewedTravel?.from_date | date:"mediumDate" }} - {{viewedTravel?.to_date |date:"mediumDate"}})
            </small>

          </b></h6>
        </div>
        <div class="table-responsive">
          <table class="table table-hover table-striped">
            <thead>
            <tr>
              <th><b>#</b></th>
              <!--<th><b>Title</b></th>-->
              <th><b>Full Name</b></th>
              <th><b>Gender</b></th>
              <th><b>Email</b></th>
              <th><b>Phone</b></th>
              <th><b>Passport No.</b></th>
              <th><b>Next of Kin</b></th>
            </tr>
            </thead>

            <tbody>
            <tr *ngFor="let attache of viewedTravel?.attaches; let ind = index">
              <td><b>{{ind+1}}.</b></td>
              <!--<td>{{attache?.title}}</td>-->
              <td>{{attache?.last_name}} {{attache?.other_names}}</td>
              <td>{{attache?.gender}}</td>
              <td>{{attache?.email}}</td>
              <td>{{attache?.phone}}</td>
              <td>{{attache?.passport_no}}</td>
              <td>
                <div class="btn-group m-b-10 show">
                  <button type="button" class="btn btn-info">view</button>
                  <button type="button" class="btn btn-info dropdown-toggle dropdown-toggle-split" data-toggle="dropdown"
                          aria-haspopup="true" aria-expanded="true">
                    <span class="sr-only">view</span>
                  </button>
                  <div class="dropdown-menu" x-placement="bottom-start"
                       style="position: absolute; transform: translate3d(52px, 38px, 0px); top: 0px; left: 0px; will-change: transform;">

                    <a class="dropdown-item text-center" href="#"><b>{{attache?.nok_relationship}}</b></a>
                    <div class="dropdown-divider"></div>
                    <a class="dropdown-item" href="#"><b>Name:</b> {{attache?.nok_name}} </a>
                    <a class="dropdown-item" href="#"><b>Email:</b> {{attache?.nok_email}}</a>
                    <a class="dropdown-item" href="#"><b>Phone:</b> {{attache?.nok_phone}}</a>


                  </div>
                </div>
              </td>
            </tr>
            </tbody>

          </table>

        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary waves-effect" data-dismiss="modal">Close</button>
      </div>
    </div><!-- /.modal-content -->


  </div><!-- /.modal-dialog -->

</div><!-- /.modal -->
<div id="receipt_modal" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="receipt_modal"
     aria-hidden="true">
  <div class="modal-dialog modal-lg">


    <div class="modal-content">
      <div class="modal-header">
        <div class="pull-left">
          <img class=" modal-logo" src="assets/front/img/app_logo.png">

        </div>
        <h5 class="modal-title mt-2 ml-5" >Receipt for <b>{{transactionReceipt?.destination}} Trip
          <small>({{transactionReceipt?.from_date | date:'mediumDate'}} -
            {{transactionReceipt?.to_date | date:'mediumDate'}})
          </small>
        </b></h5>
        <button type="button" class="close " data-dismiss="modal" aria-hidden="true"><i class="fa fa-times"></i>
        </button>
      </div>
      <div class="modal-body">
        <div  style="background: transparent !important;">

          <div class="watermark">
            <!--<img height="200" width="200" style="margin-left: 100px" src="assets/front/img/paid-stamp.png">-->
            <img src="assets/front/img/app_logo.png" alt="" >
          </div>



          <ul class="list-group list-group-flush">
            <li class="list-group-item"><h5 class="list-group-item-heading"><b>Amount:</b>
              {{transactionReceipt?.payments?.amount | currency:'₦':"symbol"}}</h5></li>
            <li class="list-group-item"><b>Payment Status: </b>
              <span class="badge badge-success" *ngIf="transactionReceipt?.payments?.status ==='successful'">{{transactionReceipt?.payments?.status | titlecase}}</span>
              <span class="badge badge-danger" *ngIf="transactionReceipt?.payments?.status !=='successful'">{{transactionReceipt?.payments?.status | titlecase}}</span>
            </li>

            <li class="list-group-item"><b>Payment Type:</b>
              {{transactionReceipt?.payments?.payment_type}}
            </li>


            <li class="list-group-item"><b>Transaction Date:</b>
              {{transactionReceipt?.payments?.created_at |date:"mediumDate"}}
            </li>

            <li class="list-group-item"><b>Policy No.:</b> {{transactionReceipt?.payments?.mapfre_policy_number}}
            </li>

            <li class="list-group-item"><b>Issued Certificate:</b> {{transactionReceipt?.payments?.chi_certificate_no || '- - - -'}}
            </li>

            <li class="list-group-item"><b>Tracking No.:</b> {{transactionReceipt?.payments?.chi_policy_number || '- - - -'}}
            </li>

            <li class="list-group-item"><b>Batch No: </b>
              {{transactionReceipt?.payments?.chi_invoice_no || '- - - -'}}
            </li>

            <li class="list-group-item"><b>Transaction Reference:</b> {{transactionReceipt?.payments?.trxref}}
            </li>
            <li class="list-group-item" ><b>Description:</b> <span > Trip to
              <b>{{transactionReceipt?.destination}}</b> from <b>{{transactionReceipt?.from_date |
                date:'mediumDate'}}</b> to
              <b>{{transactionReceipt?.to_date | date:'mediumDate'}}</b> (<b>{{transactionReceipt?.no_of_days}}</b>
              days)</span>

            </li>
          </ul>
        </div>

      </div>
      <div class="modal-footer">
       <span class="pull-left" *ngIf="!transactionReceipt?.payments?.chi_policy_number || !transactionReceipt?.payments?.chi_policy_number || !transactionReceipt?.payments?.chi_policy_number">
     <b>Admin would reconcile any missing information regarding this transaction. Thanks for choosing us!</b>

    </span>

        <div class="btn-group">
          <button type="button" class="btn btn-warning waves-effect" [disabled]="printing" (click)="printReceipt('transaction_receipt')">
            <i class="fa fa-print" *ngIf="!printing"></i>
            <i class="fa fa-cog fa-spin" *ngIf="printing"></i> Print
          </button>
          <button type="button" class="btn btn-secondary waves-effect" data-dismiss="modal">Close</button>

        </div>

      </div>
    </div><!-- /.modal-content -->


  </div><!-- /.modal-dialog -->

</div><!-- /.modal -->
<div id="certificate_modal" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="certificate_modal"
     aria-hidden="true">
  <div class="modal-dialog modal-lg">


    <div class="modal-content">
      <div class="modal-header">
        <div class="pull-left">
          <img class=" modal-logo" src="assets/front/img/app_logo.png">

        </div>
        <h5 class="modal-title mt-2 ml-5" id="">Certificate for <b>{{viewedCertificate?.destination}} Trip
          <small>({{viewedCertificate?.from_date | date:'mediumDate'}} -
            {{viewedCertificate?.to_date | date:'mediumDate'}})
          </small>
        </b></h5>
        <button type="button" class="close " data-dismiss="modal" aria-hidden="true"><i class="fa fa-times fa-2x"></i>
        </button>
      </div>
      <div class="modal-body" style="height: 50% !important;">

        <div id="display_certificate">

        </div>

      </div>
    <!--<div class="modal-footer">-->
      <!--<div class="btn-group">-->
        <!--<button type="button" class="btn btn-info waves-effect" (click)="downloadCertificate(viewedCertificate?.payments?.certificate_url)">Download Certifcate</button>-->
        <!--<button type="button" class="btn btn-secondary waves-effect" data-dismiss="modal">Close</button>-->

      <!--</div>-->
    <!--</div>-->
    </div><!-- /.modal-content -->


  </div><!-- /.modal-dialog -->

</div><!-- /.modal -->

<a class="d-none"  id="certificate_url"  download="travelInsurance.pdf"></a>

<div class="header-bg top-white">
  <div class="container-fluid">
    <!-- Page-Title -->
    <div class="row">
      <div class="col-sm-12">
        <div class="page-title-box">
          <form class="float-right app-search">

            <span *ngIf="!viewedUser?.profile?.credit_balance ||  +viewedUser?.profile?.credit_balance< 1">
                <b>Today:</b> {{today}}
            </span>

            <span  *ngIf="viewedUser?.profile?.credit_balance &&  +viewedUser?.profile?.credit_balance >1">
            <span class="pr-2"> <b>Credit:</b> {{viewedUser?.profile?.credit_balance | currency:'₦':"symbol"}}</span>
              <span id="req_ref" (click)="requestRefund(viewedUser?.profile?.credit_balance)"

                    class=""><i class="p-1 fa fa-money"></i></span>
            </span>



          </form>
          <h4 class="page-title"><i class="dripicons-user"></i><b>User:</b> {{viewedUser?.name}} </h4>
          <div class="spinner" *ngIf="loaders?.processing"></div>

        </div>
      </div>
    </div>
    <!-- end page title end breadcrumb -->

  </div>
</div>


<div class="card m-b-20 pull-up">
  <div class="card-body">

    <h4 class="mt-0 header-title"><img class="pull-right modal-logo" src="assets/front/img/app_logo.png" height="100">
    </h4>
    <div class="text-muted m-b-30 font-14">
      <nav aria-label="breadcrumb" *ngIf="!isProfile">
        <ol class="breadcrumb">
          <li class="breadcrumb-item">
            <span class="span-link" (click)="reRoute('portal/users')">Users</span>
          </li>
          <li class="breadcrumb-item active" aria-current="page">
            <small>{{viewedUser?.name}}</small>
          </li>
        </ol>
      </nav>
    </div>

    <!-- Nav tabs -->
    <ul class="nav nav-tabs nav-tabs-custom" user="tablist">
      <li class="nav-item">
        <a class="nav-link active show" data-toggle="tab" href="#profile1" user="tab" aria-selected="true">Process
          Insurance</a>
      </li>

      <li class="nav-item">
        <a class="nav-link" data-toggle="tab" href="#home1" user="tab"
           aria-selected="false">Profile Information</a>
      </li>

      <li class="nav-item">
        <a class="nav-link" (click)="getAllUserTravels()" data-toggle="tab" href="#travels" user="tab"
           aria-selected="false">Travels</a>
      </li>

      <li class="nav-item">
        <a class="nav-link" data-toggle="tab" (click)="getAllUserTransactions()" href="#transactions" user="tab"
           aria-selected="false">Latest Transactions</a>
      </li>
    </ul>

    <!-- Tab panes -->
    <div class="tab-content">
      <div class="tab-pane active show" id="profile1" user="tabpanel">
        <!--<app-process-insurance-->
          <!--[formData]="insuranceFormData"-->
          <!--[inputData]="inputData"-->
        <!--&gt;-->

        <!--</app-process-insurance>-->
      </div>
      <div class="tab-pane p-1 " id="home1" user="tabpanel">
        <ng-container *ngIf="isProfile">
          <button class="btn site-button edit_profile mt-2 " (click)="toggleEditView()" *ngIf="!editProfile"
                  [disabled]="loaders?.processing">Edit
            Profile <i class="fa fa-edit"></i></button>
          <button class="btn btn-secondary edit_profile mt-2 " (click)="toggleEditView()" *ngIf="editProfile"> Cancel <i
            class="fa fa-undo"></i></button>
        </ng-container>


        <div class="row">
          <div class="col-12">
            <div class="cardx">
              <!--<div class="card-header">-->
              <!--<div class="status-wrapper float-left">-->
              <!--<span class="activity-text">-->
              <!--<span>-->
              <!--<i class="mdi mdi-checkbox-blank-circle text-info"></i>-->
              <!--<i class="date font-italic">This report was created by {{viewedUser?.createdBy || 'an Admin'}} on {{viewedUser?.created_at|date}}</i>-->
              <!--</span>-->
              <!--</span>-->
              <!--</div>-->
              <!--</div>-->


              <div class="card-bodyx">
                <section id="cd-timeline" *ngIf="!editProfile" class="cd-containerx">
                  <div class="generalInformation mb-3">
                    <div class="pointer cd-timeline-img site-button">
                      <i class="mdi mdi-adjust"></i>
                    </div>
                    <div class="content card-lined">
                      <h3><i class="dripicons-gear">&nbsp; </i>Personal</h3>
                      <hr>

                      <div class="row">

                        <div class="col-md-4">
                          <div class="form-group">
                            <label for="amountInvolveda"><b>Full Name:</b></label>
                            <p id="amountInvolveda">{{viewedUser?.profile ? viewedUser?.profile?.last_name +' '+
                              viewedUser?.profile?.other_names : viewedUser?.name }}</p>
                          </div>
                        </div>

                        <div class="col-md-4">
                          <div class="form-group">
                            <label for="dataAffecteda"><b>Email:</b></label>
                            <div>

                              <p id="dataAffecteda">{{viewedUser?.email}}</p>
                            </div>
                          </div>
                        </div>

                        <div class="col-md-4">
                          <div class="form-group">
                            <label for="viewedFraud"><b>Phone:</b></label>
                            <p id="viewedFraud">{{viewedUser?.phone}}</p>

                          </div>
                        </div>

                      </div>
                      <ng-container *ngIf="viewedUser?.profile">

                        <div class="row">

                          <div class="col-md-4">
                            <div class="form-group">
                              <label for="user_title"><b>Title:</b></label>
                              <p id="user_title">{{viewedUser?.title}}</p>
                            </div>
                          </div>

                          <div class="col-md-4">
                            <div class="form-group">
                              <label for="user_gender"><b>Gender:</b></label>
                              <div>

                                <p id="user_gender">{{viewedUser?.gender}}</p>
                              </div>
                            </div>
                          </div>

                          <div class="col-md-4">
                            <div class="form-group">
                              <label for="user_date_of_birth"><b>Date of Birth:</b></label>
                              <p id="user_date_of_birth">{{viewedUser?.date_of_birth|date:'mediumDate'}}</p>
                            </div>
                          </div>

                        </div>

                        <div>

                          <div class="row">
                            <div class="col-md-6"
                                 *ngIf="viewedUser?.medical_cond ==='yes' && viewedUser?.cond_description">
                              <label for="medical_cond"><b>Medical Condition:</b></label>
                              <p id="medical_cond">{{viewedUser?.cond_description}}</p>
                            </div>
                            <div
                              class="col-md-{{viewedUser?.medical_cond ==='yes' && viewedUser?.cond_description?'6':'12'}}">
                              <div class="form-group">
                                <label for="user_address"><b>Address:</b></label>
                                <p id="user_address">{{viewedUser?.address}}</p>
                              </div>

                            </div>
                          </div>

                        </div>

                        <hr>
                      </ng-container>


                      <div class="row">

                        <div class="col-md-4">
                          <div class="form-group">
                            <label for="viewedFraud"><b>User Type:</b></label>
                            <p id="breachSourcea">{{viewedUser?.user_type | titlecase}} <span *ngIf="viewedUser?.role">({{viewedUser?.role?.name}})</span>
                            </p>
                          </div>
                        </div>

                        <div class="col-md-4">
                          <div class="form-group">
                            <label for="institutionInvolved"><b>Date Created:</b></label>
                            <div>

                              <p id="institutionInvolved">{{viewedUser?.created_at|date:'mediumDate'}}</p>
                            </div>
                          </div>
                        </div>

                        <div class="col-md-4">
                          <div class="form-group">
                            <label for="reasonModified"><b>Date Updated:</b></label>
                            <p id="reasonModified">{{viewedUser?.updated_at|date:'mediumDate'}}</p>
                          </div>
                        </div>

                      </div>


                    </div>
                  </div>

                  <div class="personalInformation mb-3">
                    <div class="pointer cd-timeline-img site-button">
                      <i class="mdi mdi-adjust"></i>
                    </div>
                    <div class="row">
                      <div class="col-md-6">
                        <div class="content card-lined">
                          <h3><i class="dripicons-user-id"></i> &nbsp;Passport Information</h3>
                          <hr>

                          <div class="row">

                            <div class="col-md-4">
                              <div class="form-group mt-5">
                                <label for="viewedUsername"><b>Passport Number:</b></label>
                                <p id="viewedUsername" class="text-lg-left">
                                  {{viewedUser?.passport_no}}</p>

                              </div>
                            </div>

                            <div class="col-md-8">

                              <div class="no-photo card card-lined-small">
                                <img [src]="imageUrl" alt="Blank Photo">
                              </div>


                              <!--<div class="photo-div" *ngIf="viewedUser?.passport_image">-->

                              <!--</div>-->
                            </div>


                          </div>
                        </div>

                      </div>
                      <div class="col-md-6">
                        <div class="content card-lined photo-neighbor">

                          <h3 class=""><i class="dripicons-user"></i> &nbsp;Next of Kin Details</h3>

                          <hr>
                          <div class="row">
                            <div class="col-md-4">
                              <div class="form-group">
                                <label for="companyCode"><b>Next of Kin Name:</b></label>
                                <div>
                                  <p id="companyCode">
                                    {{viewedUser?.nok_name||'None Captured.'}}
                                  </p>
                                </div>
                              </div>
                            </div>

                            <div class="col-md-4">
                              <div class="form-group">
                                <label for="user"><b>Relationship:</b></label>
                                <div>
                                  <p id="user">
                                    {{viewedUser?.nok_relationship||'None Captured.'}}
                                  </p>
                                </div>
                              </div>
                            </div>

                            <div class="col-md-4">
                              <div class="form-group">
                                <label for="nok_phone"><b>Next of Kin Phone:</b></label>
                                <div>
                                  <p id="nok_phone">
                                    {{viewedUser?.nok_phone||'None Captured.'}}
                                  </p>
                                </div>
                              </div>
                            </div>

                          </div>
                          <hr>
                          <div class="row">
                            <div class="col-md-4">
                              <div class="form-group">
                                <label for="actionTaken"><b>Next of Email:</b></label>
                                <div>
                                  <p id="actionTaken">
                                    {{viewedUser?.nok_email || 'None Captured.'}}
                                  </p>
                                </div>
                              </div>
                            </div>

                            <div class="col-md-8">
                              <div class="form-group">
                                <label for="vulnerabilities"><b>Next of Kin Address:</b></label>
                                <div>
                                  <p id="vulnerabilities">
                                    {{viewedUser?.nok_address||'None Captured.'}}
                                  </p>
                                </div>
                              </div>
                            </div>


                          </div>
                        </div>

                      </div>
                    </div>
                  </div>


                </section>

                <div class="mt-5" *ngIf="editProfile">

                  <fieldset class="border p-5">
                    <legend class="w-auto"> Details</legend>
                    <form [formGroup]="personDetailsForm">

                      <div class="row">
                        <div class="col-md-6">
                          <div class="card-lined mt-2">

                            <div class="card-header mt-2">
                              <h3 class="text-center">General</h3>
                            </div>
                            <div class="container">
                              <div class="form-row mt-2">
                                <div class="form-group col-md-6">
                                  <label for="personName">Last Name (Surname)</label>
                                  <input type="text" formControlName="last_name" class="form-control" id="personName"
                                         placeholder="last name">
                                </div>
                                <div class="form-group col-md-6">
                                  <label for="personOtherNames">Other Names</label>
                                  <input type="text" formControlName="other_names" class="form-control"
                                         id="personOtherNames"
                                         placeholder="other names">
                                </div>
                              </div>
                              <div class="form-row">
                                <div class="form-group col-md-6">
                                  <label for="personEmail">Email</label>
                                  <input type="email" formControlName="email" class="form-control" id="personEmail"
                                         placeholder="email">
                                </div>
                                <div class="form-group col-md-6">
                                  <label for="phoneNumber">Phone Number</label>
                                  <input type="text" formControlName="phone" class="form-control" id="phoneNumber"
                                         placeholder="phone number">
                                </div>
                              </div>

                              <div class="form-row">
                                <div class="form-group col-md-6">
                                  <label for="passportNumber">Passport Number</label>
                                  <input type="text" formControlName="passport_no" class="form-control"
                                         id="passportNumber">
                                </div>
                                <div class="form-group col-md-3">
                                  <label for="personTitle">Title</label>
                                  <select id="personTitle" formControlName="title" class="form-control">
                                    <option value="">Select Title</option>
                                    <option value="Mr">Mr.</option>
                                    <option value="Mrs">Mrs.</option>
                                    <option value="Master">Master</option>
                                    <option value="Miss">Miss</option>
                                    <option value="Chief">Chief</option>
                                    <option value="Honourable">Honourable</option>
                                    <option value="Clergy">Clergy</option>
                                    <option value="Excellency">Excellency</option>
                                    <option value="Doctor">Doctor</option>
                                  </select>
                                </div>
                                <div class="form-group col-md-3">
                                  <label for="personGender">Gender</label>
                                  <select formControlName="gender" id="personGender" class="form-control">
                                    <option value="">Select Gender</option>
                                    <option value="female">Female</option>
                                    <option value="male">Male</option>
                                  </select>
                                </div>
                              </div>

                              <div class="form-row">
                                <div class="form-group col-md-6">
                                  <label for="dateOfBirth">Date of Birth</label>
                                  <input type="date" formControlName="date_of_birth" max="{{today}}"
                                         class="form-control"
                                         id="dateOfBirth" placeholder="DOB">
                                </div>


                                <div class="form-group col-md-6">
                                  <label for="med_condition">Pre-existing medical conditions?</label>
                                  <select (change)="setDescription($event.target.value)" formControlName="medical_cond"
                                          id="med_condition" class="form-control">
                                    <option value="">select</option>
                                    <option value="no">No</option>
                                    <option value="yes">Yes</option>
                                  </select>
                                </div>


                              </div>

                              <div class="form-row pb-2" *ngIf="medicalCondition">
                                <div class="col-md-12">
                                  <label for="med_condition_desc">Please describe condition</label>
                                  <textarea formControlName="cond_description" id="med_condition_desc"
                                            class="form-control"></textarea>

                                </div>
                              </div>
                            </div>

                          </div>

                        </div>
                        <div class="col-md-6">
                          <div class="card-lined  mt-2">
                            <div class="card-header mt-2">
                              <h3 class="text-center">Next of Kin</h3>
                            </div>

                            <div class="container">
                              <div class="form-row mt-2">

                                <div class="form-group col-md-6">
                                  <label for="nok_name">Next of Kin Name</label>
                                  <input formControlName="nok_name" type="text" class="form-control" id="nok_name"
                                         placeholder="nok name">
                                </div>

                                <div class="form-group col-md-6">
                                  <label for="nok_rel">Next of Kin Relationship</label>
                                  <select id="nok_rel" formControlName="nok_relationship"
                                          class="select-options form-control">
                                    <option value="">Select</option>
                                    <option value="Wife">Wife</option>
                                    <option value="Brother">Brother</option>
                                    <option value="Sister">Sister</option>
                                    <option value="Pastor">Pastor</option>
                                    <option value="Husband">Husband</option>
                                    <option value="Aunts">Aunts</option>
                                    <option value="Uncles">Uncles</option>
                                    <option value="Spouse">Spouse</option>
                                    <option value="Children">Children</option>
                                    <option value="Parents">Parents</option>
                                    <option value="Siblings">Siblings</option>
                                    <option value="Grandchildren">Grandchildren</option>
                                    <option value="Grandparents">Grandparents</option>
                                    <option value="Nieces">Nieces</option>
                                    <option value="Nephews">Nephews</option>
                                    <option value="First Cousins">First Cousins</option>
                                  </select>
                                </div>
                              </div>

                              <div class="form-row">
                                <div class="form-group col-md-6">
                                  <label for="nok_phone">Next of Kin Phone</label>
                                  <input type="text" formControlName="nok_phone" class="form-control" id="nok_phone"
                                         placeholder="nok phone">
                                </div>
                                <div class="form-group col-md-6">
                                  <label for="nok_email">Next of Email</label>
                                  <input type="text" formControlName="nok_email" class="form-control" id="nok_email"
                                         placeholder="nok email">
                                </div>
                              </div>
                              <div class="form-row">

                                <div class="form-group col-md-6">
                                  <!--<div class="form-check">-->
                                  <!--<input class="form-check-input" type="checkbox" id="gridCheck">-->
                                  <!--<label class="form-check-label" for="gridCheck">-->
                                  <!--Check me out-->
                                  <!--</label>-->
                                  <!--</div>-->
                                  <label for="personAddress">Your Address</label>
                                  <textarea formControlName="address" id="personAddress" rows="5"
                                            class="form-control"></textarea>
                                </div>

                                <!--<div class="form-check">-->
                                <!--<input class="form-check-input" type="checkbox" id="gridCheck">-->
                                <!--<label class="form-check-label" for="gridCheck">-->
                                <!--Check me out-->
                                <!--</label>-->
                                <!--</div>-->
                                <div class="form-group col-md-6">
                                  <!--<div class="form-check">-->
                                  <!--<input class="form-check-input" type="checkbox" id="gridCheck">-->
                                  <!--<label class="form-check-label" for="gridCheck">-->
                                  <!--Check me out-->
                                  <!--</label>-->
                                  <!--</div>-->
                                  <label for="nok_address">Next of Kin Address</label>
                                  <textarea name="" formControlName="nok_address" rows="5" id="nok_address"
                                            class="form-control"></textarea>
                                </div>


                              </div>
                            </div>

                          </div>

                        </div>
                      </div>


                      <!--<button type="submit" class="btn btn-primary">Sign in</button>-->
                    </form>

                  </fieldset>

                  <fieldset class="border p-5">
                    <legend>
                      Update International Passport
                    </legend>

                    <form [formGroup]="uploadForm" (ngSubmit)="saveUploadForm()">

                      <div class="row">


                        <div class="col-md-6">
                          <div class="jumbotron">
                            <h5 class="text-dark pb-2 text-uppercase"><u>Instructions:</u></h5>
                            <ul>
                              <li>
                                Upload a scanned copy of your <b>International Passport</b> here
                              </li>
                              <li>
                                Passport should be in (.jpg) Format
                              </li>
                              <li>
                                Passport should not exceed 200kb
                              </li>
                            </ul>
                          </div>

                        </div>
                        <div class="col-md-6 card-lined-small img-preview">

                          <img [src]="imageUrl" alt="">

                        </div>

                      </div>

                      <div class="custom-file mt-2" *ngIf="!uploadInProgress">
                        <input type="file" class="custom-file-input mt-3"
                               id="customFile" accept=".png, .jpg, .jpeg" (change)="uploadFile($event)">
                        <label class="custom-file-label" for="customFile">{{fileName}}</label>
                      </div>

                      <ng-container *ngIf="uploadInProgress">
                        <div class="progress">
                          <div [ngClass]="setProgressStatus(percentageUpload)" role="progressbar"
                               [ngStyle]="setProgressBar(percentageUpload)" aria-valuenow="50" aria-valuemin="0"
                               aria-valuemax="100">
                            {{percentageUpload}}
                          </div>
                        </div>
                        <div>
                          {{percentageInFraction}}
                          <small class="text-{{percentageUpload !== '100%'?'info':'success'}}"><b>complete</b></small>
                        </div>
                      </ng-container>


                    </form>
                  </fieldset>

                  <div class="card-footerx mt-3">
                    <div class="pull-right">
                      <button [ngClass]="setValidationClass(personDetailsForm.valid && fileName !== 'Int. Passport')"
                              type="button"
                              [disabled]="personDetailsForm.invalid || loaders.processing || fileName === 'Int. Passport'"
                              (click)="uploadPassport()">
                        {{messages.update}} <i class="spinner" *ngIf="loaders?.processing"></i>
                      </button>
                    </div>


                  </div>

                </div>
              </div>
              <!--<div class="card-footer">-->
              <!--<div class="status-wrapper float-left" *ngIf="viewedUser?.updatedBy">-->
              <!--<span class="activity-text">-->
              <!--<span>-->
              <!--<i class="mdi mdi-checkbox-blank-circle text-info"></i>-->
              <!--<i class="date font-italic">This report was updated by {{viewedUser?.updatedBy || 'an Admin'}} on {{viewedUser?.updated_at|date}}</i>-->
              <!--</span>-->
              <!--</span>-->
              <!--</div>-->
              <!--<div class="float-right">-->
              <!--<a href="javascript:window.print()" class="btn btn-success"> &nbsp;-->
              <!--<i class="spinner" *ngIf="loaders?.processing"></i>-->
              <!--Print   <i class="dripicons-print"></i>-->
              <!--</a>-->
              <!--</div>-->
              <!--</div>-->
            </div>
          </div> <!-- end col -->
        </div> <!-- end row -->


      </div>

      <div class="tab-pane p-1" id="travels" user="tabpane2">

        <div class="wrapperxx">
          <div class="container-fluid">

            <div class="table-responsive">
              <table class="table table-striped table-bordered mt-5" cellspacing="0" width="100%">
                <thead>
                <tr>
                  <th><b>#</b></th>
                  <th><b>From</b></th>
                  <th><b>To</b></th>
                  <th><b>No. of Days</b></th>
                  <th><b>Destination</b></th>
                  <th><b>Purpose</b></th>
                  <th><b>Status</b></th>
                  <th><b>Action</b></th>

                </tr>
                </thead>


                <tbody>

                <tr *ngIf="loaders?.processing || allTravels?.length===0">
                  <td colspan="8" class="text-center" *ngIf="loaders?.processing">
                    <div class="spinner"></div>
                  </td>
                  <td colspan="8" class="text-center"
                      *ngIf="(!loaders?.processing &&  allTravels?.length===0) ">
                    No travels available.
                  </td>
                </tr>

                <tr *ngFor="let travel of allTravels; let i=index">
                  <td><b>{{i+1}}.</b></td>
                  <td>
                    {{travel?.from_date | date:'mediumDate'}}
                  </td>
                  <td>{{travel?.to_date | date:'mediumDate'}}</td>
                  <td>{{travel?.no_of_days}}</td>
                  <td>{{travel?.destination}}</td>
                  <td>

                    {{travel?.purpose}}
                  </td>

                  <td>
                    <span class="badge" [ngClass]="setClass(travel?.status)">{{travel?.status}}</span>
                  </td>

                  <td>
                    <!--<span class="badge badge-secondary" *ngIf="!travel?.attaches || travel?.attaches?.length==0">None</span>-->

                    <button class="btn btn-info btn-xx mr-2" *ngIf="travel?.attaches && travel?.attaches.length>0"
                            (click)="viewAttaches(travel)" ><i class="fa fa-users"></i>
                    </button>

                    <button class="btn btn-purple btn-xx mr-2" *ngIf="travel?.status?.toLowerCase() =='pending'"
                            (click)="editTravel(travel)" ><i class="fa fa-pencil"></i>
                    </button>

                    <button class="btn btn-primary btn-xx"
                            (click)="editTravel(travel, false)"><i class="fa fa-history"></i>
                    </button>
                  </td>



                </tr>
                </tbody>
              </table>

            </div>



          </div> <!-- end container -->
        </div>
      </div>

      <div class="tab-pane p-1" id="transactions" user="tabpane3">

        <div class="wrapperxx">
          <div class="container-fluid">

            <div class="table-responsive">
              <table class="table taable-lg table-striped table-bordered mt-5" cellspacing="0" width="100%">
                <thead>
                <tr>
                  <th><b>#</b></th>
                  <th><b>Travel Info</b></th>
                  <th><b>Premium</b></th>
                  <th><b>Amount</b></th>
                  <th><b>Transaction Id</b></th>
                  <th><b>Payment Slip</b></th>
                  <th><b>Payment Type</b></th>
                  <th><b>Status</b></th>
                  <th><b>Invoice No.</b></th>
                  <th><b>Date Created</b></th>
                  <th><b>Receipt</b></th>
                  <th><b>Certifcate</b></th>


                </tr>
                </thead>


                <tbody>

                <tr *ngIf="loaders?.processing || allTravelsWithTransactions?.length===0">
                  <td colspan="12" class="text-center" *ngIf="loaders?.processing">
                    <div class="spinner"></div>
                  </td>
                  <td colspan="12" class="text-center"
                      *ngIf="(!loaders?.processing &&  allTravelsWithTransactions?.length===0) ">
                    No transactions available.
                  </td>
                </tr>

                <tr *ngFor="let transaction of allTravelsWithTransactions; let i=index">
                  <td><b>{{i+1}}.</b></td>
                  <td>

                    {{transaction?.destination | titlecase}}
                    <hr>
                    {{transaction?.from_date | date:'mediumDate'}} -
                    {{transaction?.to_date | date:'mediumDate'}} ({{transaction?.no_of_days }} days)

                  </td>
                  <td class="text-right">{{transaction?.payments?.premium || 0 | number:'1.0-2'}}</td>
                  <td class="text-right">{{transaction?.payments?.amount || 0 | number:'1.0-2' }}</td>
                  <td>{{transaction?.payments?.transaction_id}}</td>
                  <td>
                    <div class="table-img">
                      <img [src]="transaction?.payments?.scanned_evidence"
                           *ngIf="transaction?.payments?.scanned_evidence" alt="Paid">
                      <img src="assets/front/img/paid_stamp.png"
                           *ngIf="!transaction?.payments?.scanned_evidence && transaction?.payments?.status?.toLowerCase()=='successful'"
                           alt="Paid">
                    </div>

                  </td>
                  <td>{{transaction?.payments?.payment_type}}</td>
                  <td><span class="badge" [ngClass]="setClass(transaction?.payments?.status)">{{transaction?.payments?.status}}</span>
                  </td>
                  <td>{{transaction?.payments?.chi_invoice_no || 'NIL'}}</td>
                  <td>{{transaction?.payments?.created_at | date:'mediumDate'}}</td>
                  <td>

                    <a *ngIf="transaction?.payments?.status && transaction?.payments?.status?.toLowerCase()==='pending'"
                       class="btn btn-xx btn-info mr-2 text-white" routerLink=""

                    >
                      <i class="ion-ios7-undo"></i>
                    </a>

                    <button
                      *ngIf="transaction?.payments?.status && transaction?.payments?.status?.toLowerCase()=='successful'"
                      class="btn btn-sm btn-primary "
                      (click)="openReceiptModal(transaction)"><i class="fa fa-file"></i>
                    </button>
                  </td>
                  <td>

                    <!--<span *ngIf="transaction?.payments?.status && transaction?.payments?.status?.toLowerCase()=='successful'"></span>-->

                    <div class="btn-group"
                         *ngIf="transaction?.payments?.status && transaction?.payments?.status?.toLowerCase()=='successful' && transaction?.payments?.certificate_url ">


                      <button class="btn btn-sm btn-dark "
                              (click)="openCertificateModal(transaction)" [disabled]="transaction?.loading_certificate">
                        <i class="fa fa-certificate text-danger" *ngIf="!transaction?.loading_certificate"></i>
                        <i class="fa fa-cog fa-spin" *ngIf="transaction?.loading_certificate"></i>
                      </button>
                    </div>


                    <!--[disabled]="transaction?.deleting" (click)="deleteRole(transaction,$event)">-->
                    <!--<i *ngIf="!transaction?.deleting" class="dripicons-cross"></i>-->
                    <!--<i *ngIf="transaction?.deleting" class="fa fa-spin fa-spinner"></i>-->
                    <!--</button>-->
                  </td>

                </tr>
                </tbody>
              </table>
            </div>


          </div> <!-- end container -->
        </div>

      </div>


    </div>

  </div>


</div>


<div class="modal-content d-none" id="transaction_receipt" >
  <div class="modal-header">
    <h5 class="modal-title mt-2" >Receipt for <b>{{transactionReceipt?.destination}} Trip
      <small>({{transactionReceipt?.from_date | date:'mediumDate'}} -
        {{transactionReceipt?.to_date | date:'mediumDate'}})
      </small>
    </b></h5>

  </div>
  <div class="modal-body">
    <div  style="background: transparent !important;">

      <div class="watermark">
        <img src="assets/front/img/app_logo.png" alt="" >
      </div>



      <ul class="list-group list-group-flush">
        <li class="list-group-item"><h5 class="list-group-item-heading"><b>Amount:</b>
          {{transactionReceipt?.payments?.amount | currency:'₦':"symbol"}}</h5></li>
        <li class="list-group-item"><b>Payment Status: </b>
          <span class="" style="color:green;" *ngIf="transactionReceipt?.payments?.status ==='successful'">{{transactionReceipt?.payments?.status | titlecase}}</span>
          <span class="" style="color: red" *ngIf="transactionReceipt?.payments?.status !=='successful'">{{transactionReceipt?.payments?.status | titlecase}}</span>
        </li>

        <li class="list-group-item"><b>Payment Type:</b>
          {{transactionReceipt?.payments?.payment_type}}
        </li>


        <li class="list-group-item"><b>Transaction Date:</b>
          {{transactionReceipt?.payments?.created_at |date:"mediumDate"}}
        </li>

        <li class="list-group-item"><b>Policy No.:</b> {{transactionReceipt?.payments?.mapfre_policy_number}}
        </li>

        <li class="list-group-item"><b>Issued Certificate:</b> {{transactionReceipt?.payments?.chi_certificate_no || '- - - -'}}
        </li>

        <li class="list-group-item"><b>Tracking No.:</b> {{transactionReceipt?.payments?.chi_policy_number || '- - - -'}}
        </li>

        <li class="list-group-item"><b>Batch No: </b>
          {{transactionReceipt?.payments?.chi_invoice_no || '- - - -'}}
        </li>
        <li class="list-group-item"><b>Transaction Reference:</b> {{transactionReceipt?.payments?.trxref}}
        </li>
        <li class="list-group-item" ><b>Description:</b> <span id="receipt_title"> Trip to
              <b>{{transactionReceipt?.destination}}</b> from <b>{{transactionReceipt?.from_date |
                date:'mediumDate'}}</b> to
              <b>{{transactionReceipt?.to_date | date:'mediumDate'}}</b> (<b>{{transactionReceipt?.no_of_days}}</b>
              days)</span>

        </li>
      </ul>
    </div>

  </div>
  <div class="modal-footer">
      <span class="pull-left" *ngIf="!transactionReceipt?.payments?.chi_policy_number || !transactionReceipt?.payments?.chi_policy_number || !transactionReceipt?.payments?.chi_policy_number">
     <b>Admin would reconcile any missing information regarding this transaction. Thanks for choosing us!</b>

    </span>
    <div class="pull-right" style="-webkit-filter: grayscale(100%);filter: grayscale(100%);opacity: .095; margin-top: -100px">
      <img height="200" width="200"  src="assets/front/img/receipt_stamp.jpg">
    </div>



  </div>
</div>
